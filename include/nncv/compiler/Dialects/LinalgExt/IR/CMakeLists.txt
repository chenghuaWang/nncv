# add dialect
function(linalg_ext_add_dialect)
    set(LLVM_TARGET_DEFINITIONS LinalgExtOps.td)
    mlir_tablegen(LinalgExtAttrs.h.inc -gen-attrdef-decls)
    mlir_tablegen(LinalgExtAttrs.cpp.inc -gen-attrdef-defs)
    mlir_tablegen(LinalgExtEnums.h.inc -gen-enum-decls)
    mlir_tablegen(LinalgExtEnums.cpp.inc -gen-enum-defs)
    mlir_tablegen(LinalgExtOps.h.inc -gen-op-decls)
    mlir_tablegen(LinalgExtOps.cpp.inc -gen-op-defs)
    mlir_tablegen(LinalgExtTypes.h.inc -gen-typedef-decls)
    mlir_tablegen(LinalgExtTypes.cpp.inc -gen-typedef-defs)
    mlir_tablegen(LinalgExtDialect.h.inc --gen-dialect-decls --dialect=nncv_linalg_ext)
    mlir_tablegen(LinalgExtDialect.cpp.inc --gen-dialect-defs --dialect=nncv_linalg_ext)
    add_public_tablegen_target(NNCVLinalgExtIncGen)
    add_dependencies(mlir-headers NNCVLinalgExtIncGen)
endfunction(linalg_ext_add_dialect)

# add interface
function(linalg_ext_add_interface)
    set(LLVM_TARGET_DEFINITIONS LinalgExtInterface.td)
    mlir_tablegen(LinalgExtOpInterfaces.h.inc -gen-op-interface-decls)
    mlir_tablegen(LinalgExtOpInterfaces.cpp.inc -gen-op-interface-defs)
    mlir_tablegen(LinalgExtTypeInterfaces.h.inc -gen-type-interface-decls)
    mlir_tablegen(LinalgExtTypeInterfaces.cpp.inc -gen-type-interface-defs)
    add_public_tablegen_target(NNCVLinalgExtInterfacesIncGen)
    add_dependencies(NNCVLinalgExtIncGen NNCVLinalgExtInterfacesIncGen)
endfunction(linalg_ext_add_interface)

linalg_ext_add_dialect()
linalg_ext_add_interface()
